<div class="container-fluid">
  <div class="alt-table-responsive">
    <h3>Transactions</h3>

    <md-input-container>
      <label>Hospital</label>
      <md-select ng-model="selectedHospital">
        <md-option ng-value="hospital.name" ng-repeat="hospital in hospitalsForFilter">{{hospital.name}}</md-option>
      </md-select>
    </md-input-container>
    <md-input-container>
      <label>Status</label>
      <md-select ng-model="selectedStatus">
        <md-option ng-value="status" ng-repeat="status in statusesForFilter">{{status}}</md-option>
      </md-select>
    </md-input-container>
    <md-input-container>
      <md-checkbox ng-model="showCancel">
        Show Cancel
      </md-checkbox>
    </md-input-container>

    <table class="table table-hover table-condensed">
      <thead>
        <tr>
          <th class="col-md-1 col-sm-1 hidden-xs"></th>
          <th class="col-md-2 col-sm-2 col-xs-2">Date</th>
          <th class="col-md-1 col-sm-1 col-xs-1">Type</th>
          <th class="col-md-3 col-sm-3 col-xs-3">Hospital / Supplier</th>
          <th class="col-md-3 col-sm-3 col-xs-3">Bead</th>
          <th class="col-md-1 col-sm-1 col-xs-1">Qty</th>
          <th class="col-md-1 col-sm-1 col-xs-1">Open Qty</th>
          <th class="col-md-2 col-sm-2 col-xs-2">Status</th>
          <th class="col-md-3 col-sm-3 col-xs-3">Comment</th>
        </tr>
      </thead>
      <tbody ng-repeat="transaction in transactions | filter : hospitalFilter | filter : statusFilter">
        <tr>
          <td class="hidden-xs" ng-switch="transaction.status">
            <span ng-switch-when="CANCEL"><button class="btn btn-primary btn-sm" disabled>Edit</button></span>
            <span ng-switch-default><button class="btn btn-primary btn-sm" ng-click="editTransaction($event, transaction)">Edit</button></span>
          </td>
          <td>{{transaction.asof}}</td>
          <td>{{transaction.typeInWeb}}</td>
          <td>{{transaction.hospital.name}}</td>
          <td><img ng-src="images/{{transaction.bead.name}}.jpg" on-error-src="images/error.png" width="40px" height="40px" style="margin-right:10px">{{transaction.bead.name}}</td>
          <td>{{transaction.qty}}</td>
          <td>{{transaction.open_qty}}</td>
          <td ng-switch="transaction.status">
            <span ng-switch-when="RECEIVE"><button class="btn btn-warning btn-sm" ng-click="receiveBead($event, transaction)">{{transaction.status}}</button></span>
            <span ng-switch-when="DELIVER"><button class="btn btn-danger btn-sm" ng-click="deliverBead($event, transaction)">{{transaction.status}}</button></span>
            <span ng-switch-default>{{transaction.status}}</span>
          </td>
          <td>
            <span ng-show="transaction.comment_hospital">病院: {{transaction.comment_hospital}}<br></span>
            <span ng-show="transaction.comment">SOK: {{transaction.comment}}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
